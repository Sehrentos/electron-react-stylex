# Electron React StyleX application

Sample Electron application with React and StyleX libraries.

Made using the `create-electron-app@latest` with webpack template.

# Installation

```sh
npm install
```

# Start the app

```sh
npm run start
```

# Setup guide (manual)

How the project was put together from scratch.

>State: incomplete. >Missing: config & src file changes after adding the StyleX library

1. Initialize new project

```sh
npx create-electron-app@latest electron-react-stylex --template=webpack
```

2. Install project libraries
```sh
npm install --save-dev @babel/preset-react babel-loader @babel/core
```

3. Setup babel loader in `webpack.rules.js` file
```js
{
    test: /\.jsx?$/,
    use: {
        loader: "babel-loader",
        options: {
            exclude: /node_modules/,
            presets: ["@babel/preset-react"],
        },
    },
},
```

4. Install React libraries
```sh
npm install --save react react-dom
```

5. Create `src/index.jsx` file
```js
import * as React from 'react';
import { createRoot } from 'react-dom/client';

const root = createRoot(document.body);
root.render(<h1>Hello World</h1>);
```

6. Edit `renderer.js` and include the `index.jsx` file
```js
//import './index.css';
import './index.jsx';
```

7. create `App.jsx` file
```js
import React from "react";

export default function App() {
	return (
		<div>
			<h1>App</h1>
		</div>
	)
}
```

8. import the `App.jsx` file in `index.jsx` file
```js
import App from './App.jsx';
root.render(<App />);
```

9. Test run the app to see if it works
```sh
npm run start
```

# StyleX installation

## Prerequisites
```sh
npm install --save-dev postcss-loader autoprefixer
```

## Runtime

All uses of StyleX require the runtime package to be installed.

```sh
npm install --save @stylexjs/stylex
```

## Compiler

The recommended way to use StyleX in development and production is with the build-time compiler. This can be done with any bundler that supports Babel - using the metadata generated by the StyleX plugin - and with PostCSS.

```sh
npm install --save-dev @stylexjs/babel-plugin @stylexjs/postcss-plugin postcss
```

## Babel config

You must configure your project's .babelrc file for StyleX to work as expected. Please see the Babel plugin API reference for more details.

`.babelrc.js`
```js
module.exports = {
  presets: [
    ...
  ],
  plugins: [
    ...,
    [
      "@stylexjs/babel-plugin",
      {
        dev: process.env.NODE_ENV === "development",
        test: process.env.NODE_ENV === "test",
        runtimeInjection: false,
        treeshakeCompensation: true,
        unstable_moduleResolution: {
          type: "commonJS",
        },
      },
    ],
  ],
};
```

## PostCSS config

PostCSS provides a versatile way to integrate StyleX into your project. Create a postcss.config.js file in your project root and add the StyleX plugin to it.

`postcss.config.js`
```js
module.exports = {
  plugins: {
    '@stylexjs/postcss-plugin': {
      include: [
        './**/*.{js,jsx,ts,tsx}',
        // any other files that should be included
        // this should include NPM dependencies that use StyleX
      ],
      useCSSLayers: true,
    },
    autoprefixer: {},
  },
};
```

## ESLint

Use ESLint to catch mistakes. The StyleX compiler doesnâ€™t validate styles and may still compile invalid ones. The ESLint plugin will flag invalid styles and provide fixes for common errors.

```sh
npm install --save-dev @stylexjs/eslint-plugin
```

`.eslintrc.js`
```js
module.exports = {
  plugins: ["@stylexjs"],
  rules: {
    "@stylexjs/valid-styles": "error",
    "@stylexjs/no-unused": "error",
    "@stylexjs/valid-shorthands": "warning",
    "@stylexjs/sort-keys": "warning"
  },
};
```
